[![Build Status](https://travis-ci.org/star-bnl/star-travex.svg?branch=master)](https://travis-ci.org/star-bnl/star-travex)

This package includes a collection of tools used by the STAR experiment to
evaluate reconstruction of charged particle tracks and vertices. The STAR
detector at the Relativistic Heavy Ion Collider (RHIC) in Brookhaven National
Laboratory is a multipurpose experiment designed to study properties of high and
medium energy nuclear collisions.

Although, the code in this package is mainly tested with and designed to support
reconstruction and analysis of the data collected by the STAR experiment we hope
other new or existing experiments will find it useful as well. This project can
also serve as an example for other implementations of track and vertex
evaluation toolkits who chose to save time and effort by building around
`travex`, a detector-independent suite for track and vertex reconstruction
evaluation [https://github.com/plexoos/travex].

The following individual tools are available:

- `stihify` ([stihify/README.md](src/stihify/README.md)) is used to measure the
efficiency of hits assigned to the track by a track reconstruction algorithm.
For single hit efficiency studies with `stihify` we developed a method
independent of the actual reconstruction algorithm used for finding particle
tracks.

- `vtxhist` and `vtxreco` ([vtxeval/README.md](src/vtxeval/README.md)) are aimed to
evaluate the performance of vertex finding algorithms. `vtxreco` requires
environment variable $STAR to be set.

- `stiscan` ([stiscan/README.md](src/stiscan/README.md)) is used to verify the
accuracy of the modeled detector material.

- `stargeo` builds ROOT's TGeo geometry corresponding to a geometry tag (e.g.
&lt;gtag&gt; = y2010b, y2015d, or y2018a) provided as an argument and saves it
in `stargeo_<gtag>.root` file. For available geometry tags see
<https://drupal.star.bnl.gov/STAR/comp/prod/MCGeometry>. The created TGeo
geometry can be viewed with a ROOT macro, `src/geo/viewTGeo.C`, as:

    root 'viewTGeo.C("path/to/stargeo_<gtag>.root")'

- `stigeo` . Requires environment variable $STAR to be set and a local StarDb/


Documentation generated by `doxygen` can be found at <http://star-bnl.github.io/star-travex>



How to build and install the libraries and tools
================================================


Prerequisites
-------------

- cmake (>= 3.6)
- C++ compiler with C++11 support (e.g. g++ >= 4.8.2)
- ROOT (>= 5.34.30), http://root.cern.ch
- boost libraries (>= 1.54): `program_options`, `regex`, and `filesystem`
- This project also depends on some modules from the STAR software library.
  These are already included as dependencies in the `ext/` subdirectory.


Build with cmake
----------------

Checkout the code using the following command:

    $ git clone https://github.com/star-bnl/star-travex.git

Compile and build the tools:

    $ cd star-travex/
    $ mkdir build && cd build
    $ cmake ../
    $ cmake --build ./ -- -j4 install

If the environment variable `$STAR_HOST_SYS` is specified the binaries will be
placed in the `CMAKE_INSTALL_PREFIX/.$STAR_HOST_SYS` directory with
`CMAKE_INSTALL_PREFIX` being the current directory by default.


Build within STAR environment
-----------------------------

We assume that the user environment includes the shell variables availabe within
a typical STAR account. Specifically, $OPTSTAR contains the prefix path and is
used to help `cmake` find the appropriate `boost` release.

    $ git clone https://github.com/star-bnl/star-travex.git
    $ cd star-travex/
    $ mkdir build && cd build
    $ cmake -D CMAKE_INSTALL_PREFIX=./ \
            -D BOOST_ROOT=$OPTSTAR \
            -D CMAKE_BUILD_TYPE=RelWithDebInfo ../
    $ cmake --build ./ -- -j4 install
